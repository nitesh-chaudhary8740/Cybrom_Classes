<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #arrays-container {
        border: 2px solid;
      }
      #add-array-dialougeBox {
        display: none;
        border: 2px solid;
        width: 50vh;
        height: 50vh;
        position: absolute;
        top: 20%;
        left: 40%;
      }
      #update-array-dialougeBox{
        display: none;
        border: 2px solid;
        width: 50vh;
        height: 50vh;
        position: absolute;
        top: 20%;
        left: 40%;
      }
      .arrays{
        border: 2px solid blue;
      }
    </style>
  </head>
  <body>
    <div id="add-array-dialougeBox">
      <label for="array-name-input">Enter Name of Array</label>
      <input type="text" id="array-name-input" />
      <label for="array-element-input">Enter First Element of Array</label>
      <input type="text" id="array-element-input" />
      <button id="add-new-array-btn">Create</button>
    </div>
    <div id="update-array-dialougeBox">
    <h2 id="name-of-selected-array-for-update">Update array</h2>
      <label for="array-elements-input">Enter the Element in Array</label>
      <input type="text" id="array-update-element-input" />
      <button id="update-array-btn">Update</button>
    </div>
    <div id="arrays-container">
      <button id="create-new-array-btn">Create New Array</button>
      <div id="show-arrays">

      </div>
    </div>
  </body>
  <script>

    const arraysContainer = document.getElementById("show-arrays");
    
    const allArrays = [];
    //create
    const addArrayDialougeBox = document.getElementById("add-array-dialougeBox");
    const createNewArrayBtn = document.getElementById("create-new-array-btn");

    const arrayNameInput = document.getElementById("array-name-input")
    const arrayElementInput = document.getElementById("array-element-input")
    const addNewArrayBtn = document.getElementById("add-new-array-btn")
    createNewArrayBtn.onclick = show_CreateNewArray_DilougeBox;
    addNewArrayBtn.onclick = () =>{
        console.log('is it clicked')
        addNewArray();
    }
    


    //create handlers
    function show_CreateNewArray_DilougeBox (){
        Object.assign(addArrayDialougeBox.style, { display: "block" });
    }
    function hide_CreateNewArray_DilougeBox (){
        Object.assign(addArrayDialougeBox.style, { display: "none" });
    }
   
    function addNewArray() {
        if(!arrayNameInput.value || !arrayElementInput.value){
              console.log(arrayNameInput.value)
                console.log(arrayElementInput.value)
                console.log("inside falsy value")
                alert('provide a name for new array');
                return;
        }
        console.log(arrayNameInput.value)
        console.log(arrayElementInput.value)
        const tempArr = [];
        tempArr.push(arrayElementInput.value.trim())
       
      
        allArrays.push({
            name:arrayNameInput.value.trim(),
            array:tempArr
        });
        arrayElementInput.value='';
        arrayNameInput.value='';
        hide_CreateNewArray_DilougeBox()
        showAllArrays();
    }
    
    //update array
    const updateDilougeBox = document.getElementById('update-array-dialougeBox')
    let selectedArrayIndex = null;

     function show_UpdateArray_DilougeBox (){
        Object.assign(updateDilougeBox.style, { display: "block" });
    }
    function hide_UpdateArray_DilougeBox (){
        Object.assign(updateDilougeBox.style, { display: "none" });
    }
    
    
     const updateBtn = document.getElementById('update-array-btn');
    updateBtn.onclick = updateParticulArray;

    function selectForUpdate(e){
        console.log('it clicked')
        showAllArrays();
        hide_CreateNewArray_DilougeBox();
        show_UpdateArray_DilougeBox();
        const idOfClickedElement= Number(e.target.id);//to find index of particular array
        console.log(e.target.id)
        selectedArrayIndex = idOfClickedElement??alert('idOfclikced element not found');
       
        hide_CreateNewArray_DilougeBox()

    }
    function updateParticulArray(){
        console.log("update clicked")
        const updateInput = document.getElementById('array-update-element-input')
        const updateInputValue = updateInput?.value||alert('fill input value');
        console.log('array before',allArrays[selectedArrayIndex])
        console.log('arr index',selectedArrayIndex)
        if(selectedArrayIndex||selectedArrayIndex===0){
           allArrays[selectedArrayIndex].array.push(updateInputValue);
           console.log("array after",allArrays)
        }
        updateInput.value ='';
        hide_UpdateArray_DilougeBox()
        showAllArrays();
    }
    //show/refresh list of arrays

    function createDivForAllArrays (element,index){
        const div = document.createElement('div');
        div.setAttribute('id',`${element?.name}-${index}`||alert('name is not given'))
        div.setAttribute('class','arrays')
        div.innerHTML= `    
        <h3>${element.name}</h3>
        <p id= 'p-${element.name}-${index}'>${(element.array.map((e,i)=>{return `<span id = '${i}'>${e}</span>&nbsp`})).join(' ')}
        <button id='${index}' onclick='selectForUpdate(event)'>update </button> 
        `

        arraysContainer.appendChild(div);
    }
    function showAllArrays(){
        arraysContainer.innerHTML = '';
        allArrays.forEach((e,i)=>
            createDivForAllArrays(e,i)
        )
    }
   
  </script>
</html>
